#include<reg52.h>

void Switch_S1(void);
void Switch_S2(void);
void Switch_S3(void);
void Switch_S4(void);
void delayms(unsigned int ms);
void delay(unsigned int a);


sbit S_r1 = P3^0;
sbit S_r2 = P3^1;
sbit S_r3 = P3^2;
sbit S_r4 = P3^3;
sbit S_c1 = P3^7;
sbit S_c2 = P3^6;
sbit S_c3 = P3^5;
sbit S_c4 = P3^4;

unsigned char Mybirthday[]={0XA4,0XC0,0Xc0,0X79,0XC0,0X24,0XA4,0X99};
unsigned char STID[]={0XA4,0XC0,0XA4,0XC0,0XC0,0XF9,0XB0,0XB0,0X92,0XF8,0xff,0xff,0xff,0xff,0xff,0xff,0xff};
unsigned char tab[10]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90};

void main(void)
{
	S_r2=0;
	while(1)
	{
		if(S_c2==0)
		{
			delayms(50);
			if(S_c2==0)
			{
				while(1)
					Switch_S2();
			}
		}
		else if(S_c3==0)
			{
				delayms(50);
				if(S_c3==0)
				{
					while(1)
					Switch_S3();
				}
			}
		else if(S_c1==0)
		{
			delayms(50);
			if(S_c1==0)
			{	
				while(!S_c1)
				{
					Switch_S1();
				}
			}
		}
		else if(S_c4==0)
		{
			delayms(50);
			if(S_c4==0)
			{
				while(1)
				Switch_S4();
			}
		}
	}
}

void Switch_S1(void)
{
	unsigned char a;
	unsigned char LED;
	
	for(a=0;a<3;a++)
	{
		for(LED=0;LED<8;LED++)
		{
			P1=~(0X01<<LED);
			LED+=1;
			delayms(30);
		}
		for(LED=0;LED<8;LED++)
		{
			P1=~(0X02<<LED);
			LED+=1;
			delayms(30);
		}
	}
	
	for(a=0;a<3;a++)
	{
		for(LED=0;LED<8;LED++)
		{
			P1=~(0X01<<LED);
			delayms(30);
		}
		for(LED=0;LED<8;LED++)
		{
			P1=~(0X80>>LED);
			delayms(30);
		}
	}
	for(a=0;a<3;a++)
	{
		for(LED=0;LED<4;LED++)
		{
			P1=~(0X01<<LED)&~(0x80>>LED);
			delayms(30);
		}
	}
	for(a=0;a<3;a++)
	{
		for(LED=0;LED<4;LED++)
		{
			P1=~(0X08>>LED)&~(0x10<<LED);
			delayms(30);
		}
	}
	for(a=0;a<3;a++)
	{
		P1=~(0XFF);
		delayms(30);
		P1=~(0X00);
		delayms(30);
	}
}

void Switch_S2(void)
{
	P2=0X01;P0=tab[2];
	delay(20);
	P2=0X01<<1;P0=tab[0];
	delay(20);
	P2=0X01<<2;P0=tab[0];
	delay(20);
	P2=0X01<<3;P0=0x79;
	delay(20);
	P2=0X01<<4;P0=tab[0];
	delay(20);
	P2=0X01<<5;P0=0x24;
	delay(20);
	P2=0X01<<6;P0=tab[2];
	delay(20);
	P2=0X01<<7;P0=tab[4];
	delay(20);
}

void Switch_S3(void)
{
	unsigned int a,b,c,d,e,f,g,h;
	
	for(a=0;a<2000;a++)
	{
	P2=0x80;P0=Mybirthday[0];
	delay(20);
	}
	for(b=0;b<1500;b++)
	{
	P2=0x80>>1;P0=Mybirthday[0];
	delay(20);
	P2=0X80;P0=Mybirthday[1];
	delay(20);
	}
	for(c=0;c<1100;c++)
	{
		P2=0x80>>2;P0=Mybirthday[0];
		delay(20);
		P2=0X80>>1;P0=Mybirthday[1];
		delay(20);
		P2=0x80;P0=Mybirthday[2];
		delay(20);
	}
	for(d=0;d<800;d++)
	{
		P2=0x80>>3;P0=Mybirthday[0];
		delay(20);
		P2=0X80>>2;P0=Mybirthday[1];
		delay(20);
		P2=0x80>>1;P0=Mybirthday[2];
		delay(20);
		P2=0x80;P0=Mybirthday[3];
		delay(20);
	}
	for(e=0;e<666;e++)
	{
		P2=0x80>>4;P0=Mybirthday[0];
		delay(20);
		P2=0X80>>3;P0=Mybirthday[1];
		delay(20);
		P2=0x80>>2;P0=Mybirthday[2];
		delay(20);
		P2=0x80>>1;P0=Mybirthday[3];
		delay(20);
		P2=0x80;P0=Mybirthday[4];
		delay(20);
	}
	for(f=0;f<550;f++)
	{
		P2=0x80>>5;P0=Mybirthday[0];
		delay(20);
		P2=0X80>>4;P0=Mybirthday[1];
		delay(20);
		P2=0x80>>3;P0=Mybirthday[2];
		delay(20);
		P2=0x80>>2;P0=Mybirthday[3];
		delay(20);
		P2=0x80>>1;P0=Mybirthday[4];
		delay(20);
		P2=0x80;P0=Mybirthday[5];
		delay(20);
	}
	for(g=0;g<500;g++)
	{
		P2=0x80>>6;P0=Mybirthday[0];
		delay(20);
		P2=0X80>>5;P0=Mybirthday[1];
		delay(20);
		P2=0x80>>4;P0=Mybirthday[2];
		delay(20);
		P2=0x80>>3;P0=Mybirthday[3];
		delay(20);
		P2=0x80>>2;P0=Mybirthday[4];
		delay(20);
		P2=0x80>>1;P0=Mybirthday[5];
		delay(20);
		P2=0x80;P0=Mybirthday[6];
		delay(20);
	}
	for(h=0;h<4000;h++)
	{
		P2=0x80>>7;P0=Mybirthday[0];
		delay(20);
		P2=0X80>>6;P0=Mybirthday[1];
		delay(20);
		P2=0x80>>5;P0=Mybirthday[2];
		delay(20);
		P2=0x80>>4;P0=Mybirthday[3];
		delay(20);
		P2=0x80>>3;P0=Mybirthday[4];
		delay(20);
		P2=0x80>>2;P0=Mybirthday[5];
		delay(20);
		P2=0x80>>1;P0=Mybirthday[6];
		delay(20);
		P2=0x80;P0=Mybirthday[7];
		delay(20);
	}
}

void Switch_S4(void)
{
	unsigned int a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;
	
	for(a=0;a<2000;a++)
	{
	P2=0x80;P0=STID[0];
	delay(20);
	}
	for(b=0;b<1500;b++)
	{
	P2=0x80>>1;P0=STID[0];
	delay(20);
	P2=0X80;P0=STID[1];
	delay(20);
	}
	for(c=0;c<1100;c++)
	{
		P2=0x80>>2;P0=STID[0];
		delay(20);
		P2=0X80>>1;P0=STID[1];
		delay(20);
		P2=0x80;P0=STID[2];
		delay(20);
	}
	for(d=0;d<800;d++)
	{
		P2=0x80>>3;P0=STID[0];
		delay(20);
		P2=0X80>>2;P0=STID[1];
		delay(20);
		P2=0x80>>1;P0=STID[2];
		delay(20);
		P2=0x80;P0=STID[3];
		delay(20);
	}
	for(e=0;e<666;e++)
	{
		P2=0x80>>4;P0=STID[0];
		delay(20);
		P2=0X80>>3;P0=STID[1];
		delay(20);
		P2=0x80>>2;P0=STID[2];
		delay(20);
		P2=0x80>>1;P0=STID[3];
		delay(20);
		P2=0x80;P0=STID[4];
		delay(20);
	}
	for(f=0;f<550;f++)
	{
		P2=0x80>>5;P0=STID[0];
		delay(20);
		P2=0X80>>4;P0=STID[1];
		delay(20);
		P2=0x80>>3;P0=STID[2];
		delay(20);
		P2=0x80>>2;P0=STID[3];
		delay(20);
		P2=0x80>>1;P0=STID[4];
		delay(20);
		P2=0x80;P0=STID[5];
		delay(20);
	}
	for(g=0;g<500;g++)
	{
		P2=0x80>>6;P0=STID[0];
		delay(20);
		P2=0X80>>5;P0=STID[1];
		delay(20);
		P2=0x80>>4;P0=STID[2];
		delay(20);
		P2=0x80>>3;P0=STID[3];
		delay(20);
		P2=0x80>>2;P0=STID[4];
		delay(20);
		P2=0x80>>1;P0=STID[5];
		delay(20);
		P2=0x80;P0=STID[6];
		delay(20);
	}
	for(h=0;h<420;h++)
	{
		P2=0x80>>7;P0=STID[0];
		delay(20);
		P2=0X80>>6;P0=STID[1];
		delay(20);
		P2=0x80>>5;P0=STID[2];
		delay(20);
		P2=0x80>>4;P0=STID[3];
		delay(20);
		P2=0x80>>3;P0=STID[4];
		delay(20);
		P2=0x80>>2;P0=STID[5];
		delay(20);
		P2=0x80>>1;P0=STID[6];
		delay(20);
		P2=0x80;P0=STID[7];
		delay(20);
	}
	for(i=0;i<420;i++)
	{
		P2=0x80>>7;P0=STID[1];
		delay(20);
		P2=0X80>>6;P0=STID[2];
		delay(20);
		P2=0x80>>5;P0=STID[3];
		delay(20);
		P2=0x80>>4;P0=STID[4];
		delay(20);
		P2=0x80>>3;P0=STID[5];
		delay(20);
		P2=0x80>>2;P0=STID[6];
		delay(20);
		P2=0x80>>1;P0=STID[7];
		delay(20);
		P2=0x80;P0=STID[8];
		delay(20);
	}
	for(j=0;j<420;j++)
	{
		P2=0x80>>7;P0=STID[2];
		delay(20);
		P2=0X80>>6;P0=STID[3];
		delay(20);
		P2=0x80>>5;P0=STID[4];
		delay(20);
		P2=0x80>>4;P0=STID[5];
		delay(20);
		P2=0x80>>3;P0=STID[6];
		delay(20);
		P2=0x80>>2;P0=STID[7];
		delay(20);
		P2=0x80>>1;P0=STID[8];
		delay(20);
		P2=0x80;P0=STID[9];
		delay(20);
	}
	for(k=0;k<420;k++)
	{
		P2=0x80>>7;P0=STID[3];
		delay(20);
		P2=0X80>>6;P0=STID[4];
		delay(20);
		P2=0x80>>5;P0=STID[5];
		delay(20);
		P2=0x80>>4;P0=STID[6];
		delay(20);
		P2=0x80>>3;P0=STID[7];
		delay(20);
		P2=0x80>>2;P0=STID[8];
		delay(20);
		P2=0x80>>1;P0=STID[9];
		delay(20);
		P2=0x80;P0=STID[10];
		delay(20);
	}
	for(l=0;l<420;l++)
	{
		P2=0x80>>7;P0=STID[4];
		delay(20);
		P2=0X80>>6;P0=STID[5];
		delay(20);
		P2=0x80>>5;P0=STID[6];
		delay(20);
		P2=0x80>>4;P0=STID[7];
		delay(20);
		P2=0x80>>3;P0=STID[8];
		delay(20);
		P2=0x80>>2;P0=STID[9];
		delay(20);
		P2=0x80>>1;P0=STID[10];
		delay(20);
		P2=0x80;P0=STID[11];
		delay(20);
	}
	for(m=0;m<420;m++)
	{
		P2=0x80>>7;P0=STID[5];
		delay(20);
		P2=0X80>>6;P0=STID[6];
		delay(20);
		P2=0x80>>5;P0=STID[7];
		delay(20);
		P2=0x80>>4;P0=STID[8];
		delay(20);
		P2=0x80>>3;P0=STID[9];
		delay(20);
		P2=0x80>>2;P0=STID[10];
		delay(20);
		P2=0x80>>1;P0=STID[11];
		delay(20);
		P2=0x80;P0=STID[12];
		delay(20);
	}
	for(n=0;n<420;n++)
	{
		P2=0x80>>7;P0=STID[6];
		delay(20);
		P2=0X80>>6;P0=STID[7];
		delay(20);
		P2=0x80>>5;P0=STID[8];
		delay(20);
		P2=0x80>>4;P0=STID[9];
		delay(20);
		P2=0x80>>3;P0=STID[10];
		delay(20);
		P2=0x80>>2;P0=STID[11];
		delay(20);
		P2=0x80>>1;P0=STID[12];
		delay(20);
		P2=0x80;P0=STID[13];
		delay(20);
	}
	for(o=0;o<420;o++)
	{
		P2=0x80>>7;P0=STID[7];
		delay(20);
		P2=0X80>>6;P0=STID[8];
		delay(20);
		P2=0x80>>5;P0=STID[9];
		delay(20);
		P2=0x80>>4;P0=STID[10];
		delay(20);
		P2=0x80>>3;P0=STID[11];
		delay(20);
		P2=0x80>>2;P0=STID[12];
		delay(20);
		P2=0x80>>1;P0=STID[13];
		delay(20);
		P2=0x80;P0=STID[14];
		delay(20);
	}
	for(p=0;p<420;p++)
	{
		P2=0x80>>7;P0=STID[8];
		delay(20);
		P2=0X80>>6;P0=STID[9];
		delay(20);
		P2=0x80>>5;P0=STID[10];
		delay(20);
		P2=0x80>>4;P0=STID[11];
		delay(20);
		P2=0x80>>3;P0=STID[12];
		delay(20);
		P2=0x80>>2;P0=STID[13];
		delay(20);
		P2=0x80>>1;P0=STID[14];
		delay(20);
		P2=0x80;P0=STID[15];
		delay(20);
	}
	for(q=0;q<200;q++)
	{
		P2=0x80>>7;P0=STID[9];
		delay(20);
		P2=0X80>>6;P0=STID[10];
		delay(20);
		P2=0x80>>5;P0=STID[11];
		delay(20);
		P2=0x80>>4;P0=STID[12];
		delay(20);
		P2=0x80>>3;P0=STID[13];
		delay(20);
		P2=0x80>>2;P0=STID[14];
		delay(20);
		P2=0x80>>1;P0=STID[15];
		delay(20);
		P2=0x80;P0=STID[16];
		delay(20);
	}
}
void delay(unsigned int a)
{
	while(a--);
}
void delayms(unsigned int ms)
{
	unsigned int a, b;
	for(a=0;a<ms;a++)
		for(b=845;b>0;b--);
}